var Y=YAHOO,YU=Y.util,YUD=YU.Dom,YUE=YU.Event,YL=Y.lang;TB.namespace("Digital");TB.Digital.List=function(){var a={MoreCat:function(){var b=YUD.get("quick-nav");var c=b.getElementsByTagName("dd");var e=function(f){var f;more=document.createElement("a");more.className="more";more.title="\u66f4\u591a";more.href="#";more.appendChild(document.createTextNode("\u66f4\u591a"));f.appendChild(more);if(!YUD.get("J_ViewAll")){all=document.createElement("a");all.id="J_ViewAll";all.className="view-all botton";all.href="#";all.title="\u67e5\u770b\u5168\u90e8\u6761\u4ef6";all.appendChild(document.createTextNode("\u67e5\u770b\u5168\u90e8\u6761\u4ef6"));b.appendChild(all)}};var d=YUD.getElementsByClassName("e","a","quick-nav");YUE.on(d,"click",function(f){YUE.stopEvent(f);if(!YUD.hasClass(this.parentNode,"show")){this.className="e less";this.innerHTML="\u6536\u8d77";YUD.addClass(this.parentNode,"show")}else{YUD.removeClass(this.parentNode,"show");this.className="e more";this.innerHTML="\u66f4\u591a"}});YUE.on("J_ViewAll","click",function(g){YUE.stopEvent(g);if(YUD.hasClass("quick-nav","expand")){YUD.removeClass("quick-nav","expand");var h=YUD.getElementsByClassName("expand","dl","quick-nav");for(var f=0;f<h.length;f++){h[f].className="hidden"}this.innerHTML="\u67e5\u770b\u5168\u90e8\u5c5e\u6027";this.className="view-all-less"}else{YUD.addClass("quick-nav","expand");var h=YUD.getElementsByClassName("hidden","dl","quick-nav");for(var f=0;f<h.length;f++){h[f].className="expand"}this.innerHTML="\u7cbe\u7b80\u663e\u793a\u5c5e\u6027";this.className="view-all"}})},OrderBy:function(){var c=YUD.get("J_OrderByList"),e=YUD.get("J_OrderSelector");YUE.on(e,"click",function(b){YUE.stopEvent(b)});YUE.on(c,"click",function(b){var f=YUE.getTarget(b);if("A"!==f.nodeName){return}if(-1!==f.parentNode.className.indexOf("selected")){YUE.stopEvent(b)}else{YUD.removeClass(c,"show")}});var d=YL.later(0,this,function(){});YUE.on(e,"mouseover",function(b){var f=YUE.getRelatedTarget(b);if(f!==c&&true!==YUD.isAncestor(c,f)){d.cancel();d=YL.later(200,this,function(){YUD.addClass(c,"show")})}});YUE.on(e,"mouseout",function(b){var f=YUE.getRelatedTarget(b);if(f!==c&&true!==YUD.isAncestor(c,f)){d.cancel();d=YL.later(200,this,function(){YUD.removeClass(c,"show")})}});YUE.on(c,"mouseout",function(b){var f=YUE.getRelatedTarget(b);if(f!==c&&true!==YUD.isAncestor(c,f)){d.cancel();d=YL.later(200,this,function(){YUD.removeClass(c,"show")})}})},CatBy:function(){YUE.on("J_MoreCat","click",function(b){YUE.stopEvent(b);if(YUD.hasClass("J_LeftCats","show")){YUD.removeClass("J_LeftCats","show");this.innerHTML="\u66f4\u591a>"}else{YUD.addClass("J_LeftCats","show");this.innerHTML="\u6536\u8d77>"}})},JumpTo:function(){if(!YUD.get("jumpto")){return}var c=YUD.get("jumpto");var b=c.getAttribute("tPage");YUE.on("filterPageForm","submit",function(d){if((c.value*1)>(b*1)){c.value=b}})},filter:function(){var c=YAHOO,f=c.util,i=f.Dom,h=f.Event;var d=i.get("filterSearchMinPrice");var j=i.get("filterSearchMaxPrice");var b=i.get("filter-form");var g=function(k){var l=h.getTarget(k);l.value=l.value.replace(/\D/g,"")};var e=function(k){if(d.value=="0"){d.value=""}if(j.value=="0"){j.value=""}if(d.value!=""&&j.value!=""){if(d.value*1>j.value*1){var l=d.value;d.value=j.value;j.value=l}}TB.Digital.Mod.Tool.loadAt("http://www.atpanel.com/jsclick?class=zhudong&squery="+i.get("search-keyword").value+"&scategory=&slocation=35&scontent=3citem")};h.on(d,"keyup",g);h.on(j,"keyup",g);h.on(b,"submit",e)}};return{init:function(){if(YUD.get("quick-nav")){a.MoreCat()}a.OrderBy();a.CatBy();a.JumpTo();a.filter()}}}();TB.Digital.List.init();TB.Digital.Mod.add("Small2BigV2",function(){var e=YAHOO.util,d=e.Dom,x=e.Event,f=YAHOO.lang,g=YAHOO.env.ua.ie===6,o=250,h="item-list",w="list-view",k="http://list.3c.taobao.com/json-spuPics.htm",i="selected",v="J_PopupTab",p=2000;var q,s,j,l,r,m=null;var b=function(y){while(y.lastChild){y.removeChild(y.lastChild)}};var u=function(){var y=document.createElement("div");y.className="small2big";y.innerHTML='<div class="skin" id="J_PopupCont">	<div class="skin2">		<b><a href="" target="_blank"></a></b>		<s id="J_PopupContArrow"><s></s></s>	</div></div>';document.body.appendChild(y);r=y.getElementsByTagName("a")[0];return y};var a=function(A,z,y){if(y){r.href=y}b(r);if(A.popupImage){r.appendChild(A.popupImage)}else{var B=new Image();B.src=z;d.addClass(r,"loading");r.appendChild(B);if(B.complete){t.resize.call(B)}else{B.onload=t.resize}A.popupImage=B}};var c=function(y){if(!y&&d.get(v)){y=d.getElementsByClassName(i,"li",v)[0]}a(y,y.getAttribute("data-imgsrc"));d.removeClass(y.parentNode.getElementsByTagName("li"),i);d.addClass(y,i)};var n=function(){var A=d.get(v),z,B,C,y;if(A){z=A.getElementsByTagName("li");B=z.length;y=d.getElementsByClassName(i,"li",A)[0];C=Array.indexOf(z,y);m&&m.cancel();m=f.later(p,null,function(){C=C>=B-1?0:C+1;c(z[C])},null,true)}};var t={show:function(){var B=this.trigger.getElementsByTagName("img")[0],N=B.src.replace("_100x100.jpg",""),y=B.src.replace("_100x100.jpg","_250x250.jpg"),C=this.trigger.getElementsByTagName("a")[0].href,I,D,A,J,G=this;var E=d.getViewportHeight(),z=d.getRegion(l).height,F=d.getRegion(l).top,M=document.documentElement.scrollTop||document.body.scrollTop,K=d.getRegion(this.trigger).top;if(E>F-M+z){d.setStyle("J_PopupContArrow","top","20px")}else{var H=M+E-z,L=K-H+20;d.setStyle(this.popup,"top",H+"px");d.setStyle("J_PopupContArrow","top",L+"px");if(E-(K-M)<80){d.setStyle("J_PopupContArrow","top",z-35+"px")}}a(this.trigger,y,C);if(this.trigger.items){d.insertAfter(this.trigger.items,r.parentNode);c();n();return}if(B.getAttribute("data-mpic")){I=d.getAncestorByClassName(B,"item");d.getElementsBy(function(O){if(O.className.indexOf("spu-id")>-1){D=O.value}},"input",I);if(D){J=k+(k.indexOf("?")===-1?"?":"&")+"id="+D;e.Get.script(J,{onSuccess:function(){if(TB&&TB.MultipicData&&TB.MultipicData["urls"]&&TB.MultipicData["urls"].length>0){t.loadMultiPics(TB.MultipicData["urls"],N,G.trigger)}},timeout:10000,autopurge:true})}}},hide:function(){var y=d.get(v);if(y){y.parentNode.removeChild(y)}m&&m.cancel()},resize:function(){if(g){var y=this.width,A=this.height,z=y/A;if(y>o){this.width=o;this.height=o/z}if(this.height>o){this.height=o;this.width=o*z}}d.removeClass(r,"loading")},loadMultiPics:function(D,H,z){D.splice(0,0,H);var B=0,C=D.length,F=document.createElement("ul");F.className="tab";F.id=v;for(;B<C;B++){var E=D[B]+"_40x40.jpg",y=D[B]+"_250x250.jpg";var G=document.createElement("li");G.innerHTML='<a href="#"><img src="'+E.replace("_100x100.jpg","")+'" /></a>';G.setAttribute("data-imgsrc",y.replace("_100x100.jpg",""));x.on(G,"mouseover",function(J){var I=x.getRelatedTarget(J);if(I!==this&&!d.isAncestor(this,I)){c(this);n()}});x.on(G,"click",function(I){x.stopEvent(I)});F.appendChild(G)}var A=r.parentNode.getElementsByTagName("ul");if(A.length>0){for(B=0;B<A.length;B++){A[B].parentNode.removeChild(A[B])}}d.insertAfter(F,r.parentNode);F.getElementsByTagName("li")[0].className=i;z.items=F;n()}};return{init:function(){q=d.get(h);j=d.getElementsByClassName(w,"ul",q)[0];if(q&&j){s=d.getElementsByClassName("photo","dt",q);l=u();TB.widget.SimplePopup.decorate(s,l,{position:"right",offset:[-4,0],disableClick:false,autoFit:true,eventType:"mouse",onShow:t.show,onHide:t.hide})}}}});
